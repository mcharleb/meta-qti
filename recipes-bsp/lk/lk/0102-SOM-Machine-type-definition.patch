From 8143827d700cdbd93bff0ab5406f2114c485f513 Mon Sep 17 00:00:00 2001
From: Kaustubh Gondkar <kgondkar@codeaurora.org>
Date: Fri, 18 Oct 2013 19:49:15 -0700
Subject: [PATCH 2/2] SOM Machine type definition

---
 platform/msm8960/gpio.c               |  4 ++--
 target/msm8960/include/target/board.h |  4 +---
 target/msm8960/init.c                 | 19 ++++++++++---------
 3 files changed, 13 insertions(+), 14 deletions(-)

diff --git a/platform/msm8960/gpio.c b/platform/msm8960/gpio.c
index b295e4e..680be8b 100755
--- a/platform/msm8960/gpio.c
+++ b/platform/msm8960/gpio.c
@@ -98,10 +98,10 @@ void gpio_config_uart_dm(uint8_t id)
 		/* Clarence SOM: UART_2x, GSBI-6, GPIO 14,15 */
 		case GSBI_ID_6:
 			/* configure rx gpio */
-			gpio_tlmm_config(15, 1, GPIO_INPUT, GPIO_NO_PULL,
+			gpio_tlmm_config(15, 2, GPIO_INPUT, GPIO_NO_PULL,
 							 GPIO_8MA, GPIO_DISABLE);
 			/* configure tx gpio */
-			gpio_tlmm_config(14, 1, GPIO_OUTPUT, GPIO_NO_PULL,
+			gpio_tlmm_config(14, 2, GPIO_OUTPUT, GPIO_NO_PULL,
 							 GPIO_8MA, GPIO_DISABLE);
 			break;
 
diff --git a/target/msm8960/include/target/board.h b/target/msm8960/include/target/board.h
index 083b595..b72fd22 100644
--- a/target/msm8960/include/target/board.h
+++ b/target/msm8960/include/target/board.h
@@ -56,9 +56,7 @@
 #define LINUX_MACHTYPE_8064_CDP     3948
 #define LINUX_MACHTYPE_8064_MTP     3949
 #define LINUX_MACHTYPE_8064_LIQUID  3951
-
-/* Clarence SOM */
-#define LINUX_MACHTYPE_8064_SOM_CDP 3955
+#define LINUX_MACHTYPE_8064_SOM     3953
 
 #define LINUX_MACHTYPE_8064_MPQ_CDP 3993
 #define LINUX_MACHTYPE_8064_MPQ_HRD 3994
diff --git a/target/msm8960/init.c b/target/msm8960/init.c
index 130d6c0..f8dbc3e 100755
--- a/target/msm8960/init.c
+++ b/target/msm8960/init.c
@@ -97,6 +97,12 @@ void target_init(void)
 	unsigned platform_id = board_platform_id();
 
 	dprintf(INFO, "target_init()\n");
+	dprintf(INFO, "Platform ID : (%u)\n", platform_id);
+	dprintf(INFO, "Hardware ID : (%u)\n", board_hardware_id());
+	dprintf(INFO, "Target ID   : (%u)\n", board_target_id());
+	dprintf(INFO, "Baseband    : (%u)\n", board_baseband());
+	dprintf(INFO, "PMIC type   : (%u)\n", board_pmic_type());
+	dprintf(INFO, "PMIC ver    : (%u)\n", board_pmic_ver());
 
 	/* Initialize PMIC driver */
 	pmic.read = (pm8921_read_func) & pa1_ssbi2_read_bytes;
@@ -304,12 +310,10 @@ void target_uart_init(void)
 	case LINUX_MACHTYPE_8064_LIQUID:
 		uart_dm_init(7, 0x16600000, 0x16640000);
 		break;
-
-	/* Clarence SOMi: UART_2x, GSBI-6, GPIO 14,15 */
-	case LINUX_MACHTYPE_8064_SOM_CDP:
+	case LINUX_MACHTYPE_8064_SOM:
+		/* SOM: UART_2x, GSBI-6, GPIO 14,15 */
 		uart_dm_init(6, 0x16500000, 0x16540000);
 		break;
-
 	case LINUX_MACHTYPE_8064_MPQ_CDP:
 	case LINUX_MACHTYPE_8064_MPQ_HRD:
 	case LINUX_MACHTYPE_8064_MPQ_DTV:
@@ -415,9 +419,9 @@ void target_detect(struct board_data *board)
 					 || (platform == APQ8064AB)) {
 		switch (platform_hw) {
 		case HW_PLATFORM_SURF:
-			/* Clarence SOM FIXME: Removed CDP, will use SOM_CDP */
+			/* SOM: Instead of CDP, will use SOM for hw_platform SURF */
 			/*target_id = LINUX_MACHTYPE_8064_CDP;*/
-			target_id = LINUX_MACHTYPE_8064_SOM_CDP;
+			target_id = LINUX_MACHTYPE_8064_SOM;
 			break;
 		case HW_PLATFORM_MTP:
 			target_id = LINUX_MACHTYPE_8064_MTP;
@@ -434,9 +438,6 @@ void target_detect(struct board_data *board)
 		ASSERT(0);
 	}
 	board->target = target_id;
-	dprintf(CRITICAL, "Platform    : (%d)\n", platform);
-	dprintf(CRITICAL, "Platform HW : (%d)\n", platform_hw);
-	dprintf(CRITICAL, "Target ID   : (%d)\n", target_id);
 }
 
 /* Detect the modem type */
-- 
1.8.2.1

